# MCHelper
MCHelper: An automatic tool to curate transposable element libraries

## Table of Contents  
* [Introduction](#introduction)  
* [Installation](#installation)  
* [Testing](#testing)  
* [Usage](#usage) 
* [Inputs](#input) 
* [Outputs](#output)

## Introduction
<a name="introduction"/>

Tools for de novo transposable element (TE) annotation still require substantial manual curation by a TE expert. However, manual curation of TE libraries is time-demanding and as such is unfeasible for large scale genomic studies. Moreover, it is an unreproducible process because curators make decisions depending on the expertise and the knowledge they have about TEs structure and biology. We present the Manual Curator Helper tool (MCHelper) that standardizes and automatizes the curation process. MCHelper filters low quality consensus, automatically checks their structural integrity, and extends the consensus sequences, if needed. Additionally, it can help to identify TE consensus sequences that were initially considered as unclassified elements in the raw library. In O. sativa and D. rerio, the MCHelper processed library was, on average, 12% more accurate in the number of copies annotated (in the whole genome) than the raw library generated by RepeatModeler 2 and ~40% more accurate in the euchromatic region of the D. melanogaster genome. Those annotations were also more accurately classified, and contained less short (<100 bp), and ambiguous (belonging to two or more families) copies. Also, the MCHelper processed libraries have less consensus sequences and up to 1 kb longer than the raw libraries in the three tested genomes, thus reducing the annotation times.

## Installation:
<a name="installation"/>

It is recommended to install the dependencies in an Anaconda environment. 

```
git clone https://github.com/gonzalezlab/mchelper.git
```

Then, locate the MCHelper folder and find the file named "curation.yml". Then, install the environment: 
```
conda env create -f MCHelper/curation.yml
```

Now, download the pfam databases, put it into db folder, and unzip all the databases needed by MCHelper:
```
cd MCHelper/db
wget path_to_pfam 
unzip '*.zip'
```
And that's it. You have now installed MCHelper.

## Testing:
<a name="testing"/>
To test MCHelper, we provide some example inputs and also the expected results to allow you to compare with your own outputs. To check MCHelper is running properly, you can do:

First, activate the anaconda enviroment:
```
conda activate curation
```

Then, unzip the D. melanogaster genome:
```
unzip Test_dir/repet_input/Dmel_genome.zip
```

Now, be sure you are in the main folder (this one where MCHelper.py is located), and run:
```
python3 MCHelper.py -r 123 -t 8 -i Test_dir/repet_input/ -o Test_dir/repet_output -g Test_dir/repet_input/Dmel_genome.fasta --input_type repet -b Test_dir/repet_input/diptera_odb10.fa -a F -n Dmel
```

This test will take the REPET's output and will do the curation automatically, using most of the parameters by default.
If you want to run the test for the fasta input, you can execute:
```
unzip Test_dir/fasta_input/Dmel_genome.zip

python3 MCHelper.py -r 123 -t 8 -l Test_dir/fasta_input/Dmel-families.fa -o Test_dir/fasta_output -g Test_dir/fasta_input/Dmel_genome.fna --input_type fasta -b Test_dir/repet_input/diptera_odb10.fa -a F
```
